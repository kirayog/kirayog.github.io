<!doctype html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>append</title>
    <script>
        count = 1
        function formAppend() {
            count++;
            var cnt = document.getElementById("count");
            cnt.value = count;

            var tbody = document.getElementById("tabelAppend");
            var tr = document.createElement("tr");
            var placeholder = ["購入日", "店舗", "食料品名", "数量", "税抜き価格"];
            var lastChild = tbody.lastElementChild;
            for (i = 0; i < 5; i++) {
                var th = document.createElement("th");
                var input = document.createElement("input");
                input.type = "text";
                input.placeholder = placeholder[i];
                if (i == 0) {
                    input.value = lastChild.children[0].children[0].value;
                } else if (i == 1) {
                    input.value = lastChild.children[1].children[0].value;
                    input.setAttribute("list", "store")
                } else if (i == 2) {
                    input.setAttribute("list", "food")
                }
                th.appendChild(input);
                tr.appendChild(th);
            }
            tbody.appendChild(tr);
        }
    </script>
</head>

<body>
    <h1>記録の登録</h1>
    <p id="text"></p>
    <p>購入した食料品の情報を入力してください</p>
    <form action="append.html" id="formAppend">
        <table>
            <tbody id="tabelAppend">
                <tr>
                    <th>購入日</th>
                    <th>店舗</th>
                    <th>食料品名</th>
                    <th>数量</th>
                    <th>税抜き価格</th>
                </tr>
                <tr>
                    <th><input type="text" name="date" placeholder="購入日"></th>
                    <th><input type="text" name="store" placeholder="店舗" list="store"></th>
                    <th><input type="text" name="food" placeholder="食料品名" list="food"></th>
                    <th><input type="text" name="number" placeholder="数量"></th>
                    <th><input type="text" name="price" placeholder="税抜き価格"></th>
                </tr>
            </tbody>
        </table>
        <input type="button" value="入力欄の追加" onclick="formAppend()"><br>
        <input type="submit" value="登録">
        <datalist id="store">
            <option value="xxスーパーyy店"></option>
            <option value="○○コンビニ××店"></option>
            <option value="△△スーパー□□店"></option>
            <option value="iiスーパーjj店"></option>
        </datalist>
        <datalist id="food">
            <option value="七味唐辛子"></option>
            <option value="こんにゃく"></option>
        </datalist>
        <input type="hidden" name="count" id="count">
    </form>
    <p><a href="index.html">トップ</a></p>
    <script>
        var currentUrl = new URL(location.href);
        var queryString = currentUrl.searchParams;
        if (queryString.get("count") != null) {
            var receivedValue = queryString.get("count");
            document.getElementById("text").innerHTML = receivedValue + "件のデータを登録しました";
        }
    </script>
</body>

</html>